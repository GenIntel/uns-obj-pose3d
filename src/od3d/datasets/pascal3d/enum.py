from od3d.data import ExtEnum
from od3d.datasets.enum import OD3D_CATEGORIES
from od3d.datasets.enum import OD3D_CATEGORIES_SIZES_IN_M

class PASCAL3D_SUBSETS(str, ExtEnum):
    VAL = "val"
    TRAIN = "train"

class PASCAL3D_CATEGORIES(str, ExtEnum):
    AEROPLANE = "aeroplane"
    BICYCLE = "bicycle"
    BOAT = "boat"
    BOTTLE = "bottle"
    BUS = "bus"
    CAR = "car"
    CHAIR = "chair"
    DININGTABLE = "diningtable"
    MOTORBIKE = "motorbike"
    SOFA = "sofa"
    TRAIN = "train"
    TVMONITOR = "tvmonitor"

MAP_CATEGORIES_OD3D_TO_PASCAL3D = {
    OD3D_CATEGORIES.AIRPLANE: PASCAL3D_CATEGORIES.AEROPLANE,
    OD3D_CATEGORIES.BICYCLE: PASCAL3D_CATEGORIES.BICYCLE,
    OD3D_CATEGORIES.BOAT: PASCAL3D_CATEGORIES.BOAT,
    OD3D_CATEGORIES.BOTTLE: PASCAL3D_CATEGORIES.BOTTLE,
    OD3D_CATEGORIES.BUS: PASCAL3D_CATEGORIES.BUS,
    OD3D_CATEGORIES.CAR: PASCAL3D_CATEGORIES.CAR,
    OD3D_CATEGORIES.CHAIR: PASCAL3D_CATEGORIES.CHAIR,
    OD3D_CATEGORIES.DINING_TABLE: PASCAL3D_CATEGORIES.DININGTABLE,
    OD3D_CATEGORIES.MOTORCYCLE: PASCAL3D_CATEGORIES.MOTORBIKE,
    OD3D_CATEGORIES.COUCH: PASCAL3D_CATEGORIES.SOFA,
    OD3D_CATEGORIES.TRAIN: PASCAL3D_CATEGORIES.TRAIN,
    OD3D_CATEGORIES.TV: PASCAL3D_CATEGORIES.TVMONITOR
}

# MAP_CATEGORIES_PASCAL3D_TO_OD3D = {v: k for k, v in MAP_CATEGORIES_OD3D_TO_PASCAL3D.items()}
MAP_CATEGORIES_PASCAL3D_TO_OD3D = {
    PASCAL3D_CATEGORIES.AEROPLANE: OD3D_CATEGORIES.AIRPLANE,
    PASCAL3D_CATEGORIES.BICYCLE: OD3D_CATEGORIES.BICYCLE,
    PASCAL3D_CATEGORIES.BOAT: OD3D_CATEGORIES.BOAT,
    PASCAL3D_CATEGORIES.BOTTLE: OD3D_CATEGORIES.BOTTLE,
    PASCAL3D_CATEGORIES.BUS: OD3D_CATEGORIES.BUS,
    PASCAL3D_CATEGORIES.CAR: OD3D_CATEGORIES.CAR,
    PASCAL3D_CATEGORIES.CHAIR: OD3D_CATEGORIES.CHAIR,
    PASCAL3D_CATEGORIES.DININGTABLE: OD3D_CATEGORIES.DINING_TABLE,
    PASCAL3D_CATEGORIES.MOTORBIKE: OD3D_CATEGORIES.MOTORCYCLE,
    PASCAL3D_CATEGORIES.SOFA: OD3D_CATEGORIES.COUCH,
    PASCAL3D_CATEGORIES.TRAIN: OD3D_CATEGORIES.TRAIN,
    PASCAL3D_CATEGORIES.TVMONITOR: OD3D_CATEGORIES.TV,
}

# note: changing these parameters, requires to recompute cuboids.
# assuming CAD size is approaximately 0.85;
#PASCAL3D_SCALE_NORMALIZE_TO_REAL = { category.value: OD3D_CATEGORIES_SIZES_IN_M[MAP_CATEGORIES_PASCAL3D_TO_OD3D[category]] / 0.85 for category in list(PASCAL3D_CATEGORIES) }
PASCAL3D_SCALE_NORMALIZE_TO_REAL = {
    PASCAL3D_CATEGORIES.AEROPLANE: 0.45872965455055237,
    PASCAL3D_CATEGORIES.BICYCLE: 2.2591965198516846,
    PASCAL3D_CATEGORIES.BOAT: 5.383174419403076,
    PASCAL3D_CATEGORIES.BOTTLE: 0.21387262642383575,
    PASCAL3D_CATEGORIES.BUS: 0.2667235732078552,
    PASCAL3D_CATEGORIES.CAR: 5.188516139984131,
    PASCAL3D_CATEGORIES.CHAIR: 0.6984801292419434,
    PASCAL3D_CATEGORIES.DININGTABLE: 1.5104440450668335,
    PASCAL3D_CATEGORIES.MOTORBIKE: 2.887415647506714,
    PASCAL3D_CATEGORIES.SOFA: 2.34675669670105,
    PASCAL3D_CATEGORIES.TRAIN: 0.20755930244922638,
    PASCAL3D_CATEGORIES.TVMONITOR: 1.3760024309158325,
}